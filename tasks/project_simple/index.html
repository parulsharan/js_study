<!DOCTYPE html>
<html>
  <head>
    <style>
      table {
        font-family: Verdana, Geneva, Tahoma, sans-serif;
        border-collapse: collapse;
        width: 100%;
      }

      td,
      th {
        border: 1px solid #30257a;
        text-align: left;
        padding: 8px;
      }

      tr:nth-child(even) {
        background-color: #dddddd;
      }
    </style>
  </head>
  <script>
    async function parulKeyPressedFn() {
      const baseUrl = "https://api.genderize.io/?name=";
      // 1. get value from input text box
      const nameToBeSearched = getDataFromInputText();

      // 2. add length to base url
      const updatedUrl = baseUrl + nameToBeSearched;

      // 3. get data from interne
      const jsonData = await getDataFromInternet(updatedUrl);

      // 4. display data in DIV
      displayData(jsonData);
    }

    function getDataFromInputText() {
      const inputElement = document.getElementById("idInput");
      return inputElement.value;
    }

    function displayData(jsonData) {
      const outputElement = document.getElementById("idOutput");
      outputElement.innerHTML = `name: ${jsonData.name}, gender: ${jsonData.gender}, probability: ${jsonData.probability},count:${jsonData.count}`;
    }

    async function getDataFromInternet(updatedUrl) {
      // a. get data from internet
      const response = await fetch(updatedUrl);
      console.log(`raw data from internet: ${response}`);

      // b. convert it to json object
      const jsonData = await response.json();
      console.log(`jason data from internet: ${jsonData}`);
      console.log(jsonData);
      return jsonData;
    }
  </script>
  <body>
    <h2>HTML Table</h2>

    <input id="idInput" type="text" value="" onInput="parulKeyPressedFn()" />
    <br /><br /><br />

    <div id="idOutput">waiting ...</div>
    <p>paragraph</p>

    <br /><br /><br />

    <table>
      <tr>
        <th>Name</th>
        <th>Age</th>
        <th>Address</th>
        <th>Zip code</th>
      </tr>

      <tr>
        <td>Parul Mann</td>
        <td>32</td>
        <td>San Ramon</td>
        <td>94583</td>
      </tr>

      <tr>
        <td>Davisha Mann</td>
        <td>8</td>
        <td>San Ramon</td>
      </tr>
    </table>
  </body>
</html>
